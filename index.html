<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Holy Bible (KJV) — Index</title>
  <meta name="description" content="Search and open any KJV Bible chapter in canonical order." />
  <link href="https://fonts.googleapis.com/css2?family=Alegreya:ital,wght@0,400;0,700;1,400&family=Great+Vibes&display=swap" rel="stylesheet" />
  <style>
    :root {
      --bg-hue: 210;
      --bg-hue2: calc(var(--bg-hue) + 22);
      --cross-x: 50%;
      --cross-y: 44%;
      --cross-w: 18px;
      --cross-h: 14px;
      --cross-mark-w: 240px;
      --cross-mark-h: 360px;
      --cross-mark-y: 40%;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      min-height: 100vh;
      font-family: 'Alegreya', serif;
      color: #f5f0e8;
      background-image:
        radial-gradient(720px 520px at var(--cross-x) var(--cross-y), rgba(255, 215, 0, 0.18), transparent 60%),
        radial-gradient(1100px 700px at 15% 25%, hsla(var(--bg-hue), 75%, 70%, 0.45), transparent 60%),
        radial-gradient(900px 640px at 85% 30%, hsla(var(--bg-hue2), 70%, 65%, 0.38), transparent 62%),
        radial-gradient(700px 520px at 30% 85%, hsla(calc(var(--bg-hue) + 55), 70%, 60%, 0.28), transparent 60%),
        linear-gradient(to bottom, hsl(var(--bg-hue), 55%, 55%), hsl(calc(var(--bg-hue) + 10), 55%, 45%), hsl(calc(var(--bg-hue) + 25), 55%, 60%));
      background-size: cover;
      background-position: center;
      background-attachment: fixed;
    }

    body::before {
      content: '';
      position: fixed;
      inset: 0;
      background: rgba(10, 40, 80, 0.32);
      backdrop-filter: blur(6px);
      z-index: 0;
    }

    body::after {
      content: '';
      position: fixed;
      left: var(--cross-x);
      top: var(--cross-mark-y);
      transform: translate(-50%, -50%);
      width: var(--cross-mark-w);
      height: var(--cross-mark-h);
      pointer-events: none;
      z-index: 0;
      opacity: 0.95;
      background:
        radial-gradient(closest-side at 50% 42%, rgba(255, 215, 0, 0.18), transparent 70%),
        linear-gradient(90deg,
          transparent calc(50% - var(--cross-w)),
          rgba(255, 240, 190, 0.10) calc(50% - var(--cross-w)),
          rgba(255, 215, 0, 0.34) 50%,
          rgba(255, 240, 190, 0.10) calc(50% + var(--cross-w)),
          transparent calc(50% + var(--cross-w))
        ),
        linear-gradient(180deg,
          transparent calc(34% - var(--cross-h)),
          rgba(255, 240, 190, 0.10) calc(34% - var(--cross-h)),
          rgba(255, 215, 0, 0.30) 34%,
          rgba(255, 240, 190, 0.10) calc(34% + var(--cross-h)),
          transparent calc(34% + var(--cross-h))
        );
      filter: drop-shadow(0 0 24px rgba(255, 215, 0, 0.20));
    }

    .wrap {
      position: relative;
      z-index: 1;
      max-width: 1100px;
      margin: 0 auto;
      padding: 28px 16px 40px;
    }

    header {
      text-align: center;
      padding: 28px 18px;
      border-radius: 28px;
      background: rgba(255, 255, 255, 0.14);
      border: 1px solid rgba(255, 255, 255, 0.32);
      box-shadow: 0 10px 45px rgba(0, 0, 0, 0.25), inset 0 0 80px rgba(255, 255, 255, 0.18);
      backdrop-filter: blur(18px);
      -webkit-backdrop-filter: blur(18px);
    }

    h1 {
      font-family: 'Great Vibes', cursive;
      font-size: clamp(3rem, 9vw, 5.2rem);
      margin: 0 0 10px;
      color: #ffd700;
      text-shadow: 0 0 25px rgba(255, 255, 255, 0.9), 3px 3px 10px rgba(0,0,0,0.45);
    }

    .subtitle {
      margin: 0 0 20px;
      font-style: italic;
      color: #fff8d0;
      text-shadow: 0 0 14px rgba(255,255,255,0.65);
      font-size: clamp(1.05rem, 3vw, 1.35rem);
    }

    .searchRow {
      display: flex;
      justify-content: center;
      gap: 10px;
      flex-wrap: wrap;
      margin: 18px 0 6px;
    }

    input[type="search"] {
      width: min(760px, 96vw);
      padding: 14px 16px;
      border-radius: 16px;
      border: 1px solid rgba(255, 255, 255, 0.34);
      background: rgba(0, 0, 0, 0.16);
      color: #fff;
      outline: none;
      font-size: 16px;
      box-shadow: inset 0 0 30px rgba(255, 255, 255, 0.08);
    }

    input[type="search"]::placeholder {
      color: rgba(255, 248, 208, 0.78);
    }

    input[type="search"]:focus-visible {
      border-color: rgba(255, 215, 0, 0.7);
      box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.18), inset 0 0 30px rgba(255, 255, 255, 0.10);
    }

    .meta {
      font-size: 13px;
      opacity: 0.92;
      color: #ffefb0;
    }

    .panel {
      margin-top: 16px;
      border-radius: 28px;
      background: rgba(255, 255, 255, 0.12);
      border: 1px solid rgba(255, 255, 255, 0.26);
      box-shadow: 0 10px 45px rgba(0, 0, 0, 0.20);
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      padding: 16px;
    }

    .books {
      display: grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 14px;
    }

    @media (max-width: 820px) {
      .books { grid-template-columns: 1fr; }
    }

    .book {
      border-radius: 22px;
      padding: 14px 14px 10px;
      background: rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.18);
    }

    .bookTitle {
      cursor: pointer;
      display: flex;
      align-items: baseline;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 0;
    }

    .bookTitle::-webkit-details-marker {
      display: none;
    }

    .bookTitle::marker {
      content: '';
    }

    .bookBody {
      margin-top: 10px;
    }

    .bookIndexLink {
      display: inline-block;
      margin: 0 0 10px;
      color: #ffd700;
      text-decoration: none;
      font-weight: 700;
      text-shadow: 0 0 12px rgba(255,255,255,0.35);
    }

    .bookIndexLink:hover { text-decoration: underline; }

    .bookName {
      color: #ffd700;
      font-weight: 700;
      font-size: 1.15rem;
      text-shadow: 0 0 12px rgba(255,255,255,0.35);
    }

    .count {
      font-size: 12px;
      opacity: 0.88;
      color: #fff8d0;
    }

    .chapters {
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .chapters a {
      display: inline-block;
      padding: 7px 10px;
      border-radius: 999px;
      text-decoration: none;
      color: #fef6d5;
      border: 1px solid rgba(255, 215, 0, 0.22);
      background: rgba(0,0,0,0.14);
      font-size: 13px;
    }

    .chapters a:hover {
      border-color: rgba(255, 215, 0, 0.55);
      box-shadow: 0 0 22px rgba(255, 215, 0, 0.14);
    }

    .results {
      display: grid;
      grid-template-columns: 1fr;
      gap: 10px;
    }

    .resultItem {
      padding: 12px 12px;
      border-radius: 18px;
      background: rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.18);
      display: flex;
      justify-content: space-between;
      gap: 12px;
      align-items: center;
    }

    .resultItem a {
      color: #ffd700;
      text-decoration: none;
      font-weight: 700;
    }

    .resultItem a:hover { text-decoration: underline; }

    footer {
      margin-top: 18px;
      text-align: center;
      font-size: 13px;
      color: #ffefb0;
      opacity: 0.92;
    }

    footer a {
      color: #ffd700;
      text-decoration: none;
      border-bottom: 1px dotted rgba(255, 215, 0, 0.55);
    }

    footer a:hover {
      border-bottom-color: rgba(255, 215, 0, 0.9);
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Holy Bible</h1>
      <p class="subtitle">King James Version — read, listen, and reflect.</p>
      <div class="searchRow">
        <input id="q" type="search" autocomplete="off" spellcheck="false" placeholder="Search: John 3, Psalm 23, Genesis 1, 1 Peter 2…" />
      </div>
      <div class="meta" id="meta">Loading…</div>
    </header>

    <div class="panel" id="panel"></div>

    <footer>
      Verses via <a href="https://biblehub.com/" target="_blank" rel="noopener noreferrer">BibleHub</a>. Audio narration thanks to <a href="https://mp3bible.ca/" target="_blank" rel="noopener noreferrer">mp3bible.ca</a>.
    </footer>
  </div>

  <script>
    // Canonical 66-book order, matching this site's folder naming.
    const BOOKS = [
      { name: 'Genesis', folder: 'Genesis', chapters: 50 },
      { name: 'Exodus', folder: 'Exodus', chapters: 40 },
      { name: 'Leviticus', folder: 'Leviticus', chapters: 27 },
      { name: 'Numbers', folder: 'Numbers', chapters: 36 },
      { name: 'Deuteronomy', folder: 'Deuteronomy', chapters: 34 },
      { name: 'Joshua', folder: 'Joshua', chapters: 24 },
      { name: 'Judges', folder: 'Judges', chapters: 21 },
      { name: 'Ruth', folder: 'Ruth', chapters: 4 },
      { name: '1 Samuel', folder: '1Samuel', chapters: 31 },
      { name: '2 Samuel', folder: '2Samuel', chapters: 24 },
      { name: '1 Kings', folder: '1Kings', chapters: 22 },
      { name: '2 Kings', folder: '2Kings', chapters: 25 },
      { name: '1 Chronicles', folder: '1Chronicles', chapters: 29 },
      { name: '2 Chronicles', folder: '2Chronicles', chapters: 36 },
      { name: 'Ezra', folder: 'Ezra', chapters: 10 },
      { name: 'Nehemiah', folder: 'Nehemiah', chapters: 13 },
      { name: 'Esther', folder: 'Esther', chapters: 10 },
      { name: 'Job', folder: 'Job', chapters: 42 },
      { name: 'Psalms', folder: 'Psalms', chapters: 150 },
      { name: 'Proverbs', folder: 'Proverbs', chapters: 31 },
      { name: 'Ecclesiastes', folder: 'Ecclesiastes', chapters: 12 },
      { name: 'Song of Solomon', folder: 'Songs', chapters: 8 },
      { name: 'Isaiah', folder: 'Isaiah', chapters: 66 },
      { name: 'Jeremiah', folder: 'Jeremiah', chapters: 52 },
      { name: 'Lamentations', folder: 'Lamentations', chapters: 5 },
      { name: 'Ezekiel', folder: 'Ezekiel', chapters: 48 },
      { name: 'Daniel', folder: 'Daniel', chapters: 12 },
      { name: 'Hosea', folder: 'Hosea', chapters: 14 },
      { name: 'Joel', folder: 'Joel', chapters: 3 },
      { name: 'Amos', folder: 'Amos', chapters: 9 },
      { name: 'Obadiah', folder: 'Obadiah', chapters: 1 },
      { name: 'Jonah', folder: 'Jonah', chapters: 4 },
      { name: 'Micah', folder: 'Micah', chapters: 7 },
      { name: 'Nahum', folder: 'Nahum', chapters: 3 },
      { name: 'Habakkuk', folder: 'Habakkuk', chapters: 3 },
      { name: 'Zephaniah', folder: 'Zephaniah', chapters: 3 },
      { name: 'Haggai', folder: 'Haggai', chapters: 2 },
      { name: 'Zechariah', folder: 'Zechariah', chapters: 14 },
      { name: 'Malachi', folder: 'Malachi', chapters: 4 },
      { name: 'Matthew', folder: 'Matthew', chapters: 28 },
      { name: 'Mark', folder: 'Mark', chapters: 16 },
      { name: 'Luke', folder: 'Luke', chapters: 24 },
      { name: 'John', folder: 'John', chapters: 21 },
      { name: 'Acts', folder: 'Acts', chapters: 28 },
      { name: 'Romans', folder: 'Romans', chapters: 16 },
      { name: '1 Corinthians', folder: '1Corinthians', chapters: 16 },
      { name: '2 Corinthians', folder: '2Corinthians', chapters: 13 },
      { name: 'Galatians', folder: 'Galatians', chapters: 6 },
      { name: 'Ephesians', folder: 'Ephesians', chapters: 6 },
      { name: 'Philippians', folder: 'Philippians', chapters: 4 },
      { name: 'Colossians', folder: 'Colossians', chapters: 4 },
      { name: '1 Thessalonians', folder: '1Thessalonians', chapters: 5 },
      { name: '2 Thessalonians', folder: '2Thessalonians', chapters: 3 },
      { name: '1 Timothy', folder: '1Timothy', chapters: 6 },
      { name: '2 Timothy', folder: '2Timothy', chapters: 4 },
      { name: 'Titus', folder: 'Titus', chapters: 3 },
      { name: 'Philemon', folder: 'Philemon', chapters: 1 },
      { name: 'Hebrews', folder: 'Hebrews', chapters: 13 },
      { name: 'James', folder: 'James', chapters: 5 },
      { name: '1 Peter', folder: '1Peter', chapters: 5 },
      { name: '2 Peter', folder: '2Peter', chapters: 3 },
      { name: '1 John', folder: '1John', chapters: 5 },
      { name: '2 John', folder: '2John', chapters: 1 },
      { name: '3 John', folder: '3John', chapters: 1 },
      { name: 'Jude', folder: 'Jude', chapters: 1 },
      { name: 'Revelation', folder: 'Revelation', chapters: 22 }
    ];

    const els = {
      q: document.getElementById('q'),
      meta: document.getElementById('meta'),
      panel: document.getElementById('panel')
    };

    const totalChapters = BOOKS.reduce((sum, b) => sum + b.chapters, 0);

    function norm(s) {
      return String(s || '')
        .toLowerCase()
        .replace(/[^a-z0-9\s]/g, ' ')
        .replace(/\s+/g, ' ')
        .trim();
    }

    function parseQuery(raw) {
      const q = norm(raw);
      if (!q) return { q, bookPart: '', chapter: null };

      // Find last number as chapter target.
      const m = q.match(/\b(\d{1,3})\b(?!.*\b\d{1,3}\b)/);
      const chapter = m ? Number(m[1]) : null;
      const bookPart = chapter !== null ? q.replace(new RegExp(`\\b${chapter}\\b`), '').trim() : q;
      return { q, bookPart, chapter: Number.isFinite(chapter) ? chapter : null };
    }

    function buildDefaultView() {
      const div = document.createElement('div');
      div.className = 'books';

      for (const b of BOOKS) {
        const card = document.createElement('div');
        card.className = 'book';

        const details = document.createElement('details');

        const title = document.createElement('summary');
        title.className = 'bookTitle';

        const name = document.createElement('span');
        name.className = 'bookName';
        name.textContent = b.name;

        const count = document.createElement('div');
        count.className = 'count';
        count.textContent = `${b.chapters} chapter${b.chapters === 1 ? '' : 's'}`;

        title.appendChild(name);
        title.appendChild(count);

        const body = document.createElement('div');
        body.className = 'bookBody';

        const indexLink = document.createElement('a');
        indexLink.className = 'bookIndexLink';
        indexLink.href = `${b.folder}/index.html`;
        indexLink.textContent = `Open ${b.name}`;

        const chWrap = document.createElement('div');
        chWrap.className = 'chapters';
        for (let ch = 1; ch <= b.chapters; ch++) {
          const link = document.createElement('a');
          link.href = `${b.folder}/${b.folder}${ch}.html`;
          link.textContent = String(ch);
          link.title = `${b.name} ${ch}`;
          chWrap.appendChild(link);
        }

        body.appendChild(indexLink);
        body.appendChild(chWrap);

        details.appendChild(title);
        details.appendChild(body);
        card.appendChild(details);
        div.appendChild(card);
      }

      return div;
    }

    function buildSearchResults(raw) {
      const { bookPart, chapter } = parseQuery(raw);
      const wantBook = norm(bookPart);
      const wantChapter = Number.isFinite(chapter) && chapter !== null ? chapter : null;

      const results = [];
      for (const b of BOOKS) {
        const bookKey = norm(b.name);
        const bookOk = !wantBook || bookKey.includes(wantBook);
        if (!bookOk) continue;

        if (wantChapter !== null) {
          if (wantChapter >= 1 && wantChapter <= b.chapters) {
            results.push({ book: b, ch: wantChapter });
          }
        } else {
          // No specific chapter: return the book index as a single entry.
          results.push({ book: b, ch: null });
        }
      }

      // If user gave a chapter number but no book match, show that chapter across all books where it exists.
      if (results.length === 0 && wantChapter !== null) {
        for (const b of BOOKS) {
          if (wantChapter >= 1 && wantChapter <= b.chapters) {
            results.push({ book: b, ch: wantChapter });
          }
        }
      }

      const wrap = document.createElement('div');
      wrap.className = 'results';

      for (const r of results.slice(0, 250)) {
        const row = document.createElement('div');
        row.className = 'resultItem';

        const left = document.createElement('div');
        const a = document.createElement('a');
        if (r.ch === null) {
          a.href = `${r.book.folder}/index.html`;
          a.textContent = r.book.name;
        } else {
          a.href = `${r.book.folder}/${r.book.folder}${r.ch}.html`;
          a.textContent = `${r.book.name} ${r.ch}`;
        }
        left.appendChild(a);

        const right = document.createElement('div');
        right.className = 'count';
        right.textContent = (r.ch === null) ? 'Book index' : 'Chapter';

        row.appendChild(left);
        row.appendChild(right);
        wrap.appendChild(row);
      }

      const countLine = document.createElement('div');
      countLine.className = 'meta';
      countLine.style.marginBottom = '10px';
      const shown = Math.min(results.length, 250);
      countLine.textContent = `Matches: ${results.length}${results.length > shown ? ` (showing first ${shown})` : ''}`;

      const out = document.createElement('div');
      out.appendChild(countLine);
      out.appendChild(wrap);
      return out;
    }

    function render() {
      const raw = els.q.value || '';
      const q = norm(raw);
      els.panel.innerHTML = '';

      if (!q) {
        els.panel.appendChild(buildDefaultView());
        els.meta.textContent = `${BOOKS.length} books • ${totalChapters} chapters • Search examples: “John 3”, “Psalm 23”, “1 Peter 2”`;
        return;
      }

      els.panel.appendChild(buildSearchResults(raw));
      els.meta.textContent = `Search: ${raw}`;
    }

    els.q.addEventListener('input', () => render());
    render();
  </script>
</body>
</html>
